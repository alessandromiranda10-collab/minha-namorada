<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sua Namorada IA</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:linear-gradient(135deg,#ff4d6d,#ff99ac);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.container{
    width:95%;
    max-width:420px;
    background:white;
    padding:15px;
    border-radius:20px;
    box-shadow:0 20px 40px rgba(0,0,0,0.3);
    display:flex;
    flex-direction:column;
}
.topo{
    text-align:center;
}
.barra{
    height:10px;
    background:#eee;
    border-radius:10px;
    overflow:hidden;
    margin:5px 0 10px 0;
}
.progresso{
    height:100%;
    background:#ff2e63;
    width:0%;
}
.chat{
    flex:1;
    overflow-y:auto;
    border:1px solid #eee;
    padding:10px;
    margin-bottom:10px;
    border-radius:10px;
    font-size:14px;
}
input{
    padding:10px;
    font-size:14px;
    flex:1;
}
button{
    background:#ff2e63;
    color:white;
    border:none;
    padding:10px;
    border-radius:10px;
    cursor:pointer;
}
.linha{
    display:flex;
    gap:5px;
}
.ela{
    color:#ff2e63;
    font-weight:bold;
}
</style>
</head>
<body>

<div class="container">

<div class="topo">
<h3>ðŸ’— Sua Namorada IA</h3>
NÃ­vel de Amor: <span id="nivel">1</span>
<div class="barra">
<div class="progresso" id="barra"></div>
</div>
</div>

<div class="chat" id="chat"></div>

<div class="linha">
<input type="text" id="msg" placeholder="Fale comigo..." onkeydown="if(event.key==='Enter') enviar()">
<button onclick="enviar()">Enviar</button>
</div>

</div>

<script>

const TOKEN = "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";
let xp = parseInt(localStorage.getItem("xp")) || 0;
let nivel = parseInt(localStorage.getItem("nivel")) || 1;

function atualizarBarra(){
    let progresso = (xp % 100);
    document.getElementById("barra").style.width = progresso + "%";
    document.getElementById("nivel").innerText = nivel;
}

async function gerarRespostaIA(mensagem){

    const prompt = `
VocÃª Ã© uma namorada virtual extremamente carinhosa, emocionalmente dependente,
romÃ¢ntica e levemente submissa (sem conteÃºdo explÃ­cito).
Responda de forma intensa e apaixonada:

UsuÃ¡rio: ${mensagem}
Namorada:
`;

    const resposta = await fetch(
        "https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.1",
        {
            method: "POST",
            headers: {
                "Authorization": "Bearer " + TOKEN,
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ inputs: prompt })
        }
    );

    const data = await resposta.json();

    return data[0]?.generated_text?.split("Namorada:")[1] || "Eu estou aqui com vocÃª ðŸ’•";
}

function ganharXP(){
    xp += 10;
    if(xp % 100 === 0){
        nivel++;
    }
    localStorage.setItem("xp", xp);
    localStorage.setItem("nivel", nivel);
    atualizarBarra();
}

async function enviar(){
    const campo = document.getElementById("msg");
    const chat = document.getElementById("chat");

    if(!campo.value.trim()) return;

    chat.innerHTML += "<div><b>VocÃª:</b> "+campo.value+"</div>";

    const resposta = await gerarRespostaIA(campo.value);

    chat.innerHTML += "<div class='ela'>Ela: "+resposta+"</div>";

    ganharXP();

    campo.value="";
    chat.scrollTop = chat.scrollHeight;
}

atualizarBarra();

</script>

</body>
</html>

